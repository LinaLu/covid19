data <- read.csv("mexico_covid19.csv", 1)
mexico_data_csv <- read.csv("mexico_covid19.csv", 1)
glimpse(mexico_data_csv)
library(tidyverse)
glimpse(brooklyn)
mexico_data_csv <- read.csv("mexico_covid19.csv", 1)
glimpse(mexico_data_csv)
class(mexico_data_csv)
drop_columns <- c("ID_REGISTRO","ENTIDAD_UM", "ENTIDAD_RES", "DELAY", "ENTIDAD_REGISTRO",
"ENTIDAD", "ABR_ENT", "FECHA_ACTUALIZACION", "ORIGEN", "SECTOR", "ENTIDAD_NAC", "MUNICIPIO_RES",
"TIPO_PACIENTE", "NACIONALIDAD", "HABLA_LENGUA_INDIG", "EPOC", "OTRA_COM", "MIGRANTE", "PAIS_NACIONALIDAD")
df.covid_mexico <- df.covid_mexico[ , !(names(df.covid_mexico) %in% drop_columns)]
df.covid_mexico <- read.csv("mexico_covid19.csv", 1)
glimpse(df.covid_mexico)
# drop columns that are not used by the model
drop_columns <- c("ID_REGISTRO","ENTIDAD_UM", "ENTIDAD_RES", "DELAY", "ENTIDAD_REGISTRO",
"ENTIDAD", "ABR_ENT", "FECHA_ACTUALIZACION", "ORIGEN", "SECTOR", "ENTIDAD_NAC", "MUNICIPIO_RES",
"TIPO_PACIENTE", "NACIONALIDAD", "HABLA_LENGUA_INDIG", "EPOC", "OTRA_COM", "MIGRANTE", "PAIS_NACIONALIDAD")
df.covid_mexico <- df.covid_mexico[ , !(names(df.covid_mexico) %in% drop_columns)]
glimpse(df.covid_mexico)
drop_columns <- c("ID_REGISTRO", "FECHA_ARCHIVO", "ENTIDAD_UM", "ENTIDAD_RES", "DELAY", "ENTIDAD_REGISTRO",
"ENTIDAD", "ABR_ENT", "FECHA_ACTUALIZACION", "ORIGEN", "SECTOR", "ENTIDAD_NAC", "MUNICIPIO_RES",
"TIPO_PACIENTE", "NACIONALIDAD", "HABLA_LENGUA_INDIG", "EPOC", "OTRA_COM", "MIGRANTE", "PAIS_NACIONALIDAD")
df.covid_mexico <- df.covid_mexico[ , !(names(df.covid_mexico) %in% drop_columns)]
glimpse(df.covid_mexico)
drop_columns <- c("ID_REGISTRO", "FECHA_ARCHIVO", "ENTIDAD_UM", "ENTIDAD_RES", "DELAY", "ENTIDAD_REGISTRO",
"ENTIDAD", "ABR_ENT", "FECHA_ACTUALIZACION", "ORIGEN", "SECTOR", "ENTIDAD_NAC", "MUNICIPIO_RES",
"TIPO_PACIENTE", "FECHA_SINTOMAS", "NACIONALIDAD", "HABLA_LENGUA_INDIG", "EPOC", "OTRA_COM", "MIGRANTE", "PAIS_NACIONALIDAD")
df.covid_mexico <- df.covid_mexico[ , !(names(df.covid_mexico) %in% drop_columns)]
# drop columns that are not used by the model
glimpse(df.covid_mexico)
names(df.covid_mexico)
columns <- c("RESULTADO","SEXO","FECHA_INGRESO","FECHA_DEF","INTUBADO","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"RENAL_CRONICA","TABAQUISMO","OTRO_CASO","PAIS_ORIGEN","UCI")
df.covid_mexico <- df.covid_mexico[columns)]
# drop columns that are not used by the model
glimpse(df.covid_mexico)
# drop columns that are not used by the model
columns <- c("RESULTADO","SEXO","FECHA_INGRESO","FECHA_DEF","INTUBADO","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"RENAL_CRONICA","TABAQUISMO","OTRO_CASO","PAIS_ORIGEN","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# drop columns that are not used by the model
glimpse(df.covid_mexico)
columns <- c("RESULTADO","SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"RENAL_CRONICA","TABAQUISMO","OTRO_CASO","PAIS_ORIGEN","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# drop columns that are not used by the model
glimpse(df.covid_mexico)
columns <- c("RESULTADO","SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"RENAL_CRONICA","TABAQUISMO","OTRO_CASO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# drop columns that are not used by the model
glimpse(df.covid_mexico)
# drop columns that are not used by the model
columns <- c("RESULTADO","SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"RENAL_CRONICA","TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# drop columns that are not used by the model
glimpse(df.covid_mexico)
columns <- c("RESULTADO","SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
glimpse(df.covid_mexico)
# rename the remaining columns
names(columns) <- c("Result","Gender","DateOfAdmissions","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese",
"Smoking","IntesiveCareUnit")
glimpse(df.covid_mexico)
names(df.covid_mexico) <- c("Result","Gender","DateOfAdmissions","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese",
"Smoking","IntesiveCareUnit")
glimpse(df.covid_mexico)
# drop columns that are not used by the model
columns <- c("SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# rename the remaining columns
names(df.covid_mexico) <- c("Gender","DateOfAdmissions","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
glimpse(df.covid_mexico)
# drop columns that are not used by the model
columns <- c("RESULTADO", "SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# rename the remaining columns
names(df.covid_mexico) <- c("TestResult", "Gender","DateOfAdmissions","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
# TestResult 1 -> POSITIVE; 2 -> NEGATIVE
# Gender 1 -> Female; 2 -> Male
glimpse(df.covid_mexico)
df.covid_mexico <- read.csv("mexico_covid19.csv", 1)
# drop columns that are not used by the model
columns <- c("RESULTADO", "SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
# rename the remaining columns
names(df.covid_mexico) <- c("TestResult", "Gender","DateOfAdmissions","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
# 1 -> POSITIVE; 2 -> NEGATIVE; 97 -> N/A
# Gender 1 -> Female; 2 -> Male
glimpse(df.covid_mexico)
df.covid_mexico <- read.csv("https://raw.githubusercontent.com/marianarf/covid19_mexico_analysis/master/mexico_covid19.csv
", 1)
df.covid_mexico <- read.csv(url("https://raw.githubusercontent.com/marianarf/covid19_mexico_analysis/master/mexico_covid19.csv
"), 1)
df.covid_mexico <- read.csv("http://raw.githubusercontent.com/marianarf/covid19_mexico_analysis/master/mexico_covid19.csv", 1)
columns <- c("RESULTADO", "SEXO","FECHA_INGRESO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico[columns]
names(df.covid_mexico) <- c("TestResult", "Gender","DateOfAdmissions","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
# 1 -> POSITIVE; 2 -> NEGATIVE; 97 -> N/A
# Gender 1 -> Female; 2 -> Male
glimpse(df.covid_mexico)
mapvalues
recode
str(df.covid_mexico$TestResul)
summary(df.covid_mexico$TestResul)
recode(df.covid_mexico$TestResult, 2=0)
recode(df.covid_mexico$TestResult, 2="0")
recode(df.covid_mexico$TestResult, `0=NA`)
recode(df.covid_mexico$TestResult, 0=NA)
recode(df.covid_mexico$TestResult, "0=NA")
df.covid_mexico$TestResult
recode(df.covid_mexico$TestResult, "2=0")
x<-rep(1:3,3)
x
recode(x, "c(1,2)='A'; else='B'")
recode(x, "c(1,2)='A'; else='B'")
x<-rep(1:3,3)
x
Recode(x, "c(1,2)='A'; else='B'")
recode(x, "c(1,2)='A'; else='B'")
recode(x, c(1,2)='A'; else='B')
recode(x, "c(1,2)='A'; else='B'")
recode(x, `c(1,2)='A'; else='B'`)
recode(x, "c(1,2)='A'; else='B'")
car::recode
car::recode(x, "c(1,2)='A'; else='B'")
car::recode(df.covid_mexico$TestResult, "2=0")
cols = c("TestResult")
df[cols] <- lapply(df[cols], function(x) car::recode(x, "2=0")  )
glimpse(df.covid_mexico)
cols = c("TestResult")
A <- function(x) car::recode(x, "2=0")
df[cols] <- lapply(df[cols], A)
A <- function(x) car::recode(x, "2=0")
df.covid_mexico[cols] <- lapply(df.covid_mexico[cols], A)
glimpse(df.covid_mexico)
cols = c("TestResult")
df.covid_mexico[cols] <- lapply(df.covid_mexico[cols], function(x) car::recode(x, "2=0"))
glimpse(df.covid_mexico)
boolean_columns = c("TestResult","Neumonia","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
df.covid_mexico[boolean_columns] <- lapply(df.covid_mexico[boolean_columns], function(x) car::recode(x, "2=0;97=NA"))
glimpse(df.covid_mexico)
df.covid_mexico$DateOfDeath != "9999-99-99"
df.covid_mexico$PatientOutcome <- ifelse(df.covid_mexico$DateOfDeath != "9999-99-99", 1,0)
glimpse(df.covid_mexico)
df[, DateOfDeath := NULL]
within(df, rm(DateOfDeath))
within(df.covid_mexico, rm(DateOfDeath))
df.covid_mexico <- within(df.covid_mexico, rm(DateOfDeath))
glimpse(df.covid_mexico)
df.covid_mexico.raw <- read.csv("http://raw.githubusercontent.com/marianarf/covid19_mexico_analysis/master/mexico_covid19.csv", 1)
# drop columns that are not used by the model
columns <- c("RESULTADO", "SEXO","FECHA_DEF","NEUMONIA","EDAD","EMBARAZO","DIABETES",
"ASMA","INMUSUPR","HIPERTENSION","CARDIOVASCULAR","OBESIDAD",
"TABAQUISMO","UCI")
df.covid_mexico <- df.covid_mexico.raw[columns]
# rename the remaining columns
names(df.covid_mexico) <- c("TestResult","Gender","DateOfDeath","Neumonia","Age","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
# 1 -> POSITIVE; 2 -> NEGATIVE; 97 -> N/A
# Gender 1 -> Female; 2 -> Male
boolean_columns = c("TestResult","Neumonia","Pregnant","Diabetes",
"Astma","ImmunoSuppressed","Hypertension","Cardiovascular","Obese","Smoking","IntesiveCareUnit")
df.covid_mexico[boolean_columns] <- lapply(df.covid_mexico[boolean_columns], function(x) car::recode(x, "2=0;97=NA"))
df.covid_mexico$PatientOutcome <- ifelse(df.covid_mexico$DateOfDeath != "9999-99-99", 1,0)
df.covid_mexico <- within(df.covid_mexico, rm(DateOfDeath))
glimpse(df.covid_mexico)
filter(starwars, TestResult == 0 & PatientOutcome == 1)
filter(df.covid_mexico, TestResult == 0 & PatientOutcome == 1)
length(filter(df.covid_mexico, TestResult == 0 & PatientOutcome == 1))
length(filter(df.covid_mexico, ICE == 0 & PatientOutcome == 1))
length(filter(df.covid_mexico, ICU == 0 & PatientOutcome == 1))
length(filter(df.covid_mexico, IntesiveCareUnit == 0 & PatientOutcome == 1))
length(filter(df.covid_mexico, PatientOutcome == 1))
summary(df.covid_mexico)
length(df.covid_mexico)
glimpse(df.covid_mexico
)
nrow(filter(df.covid_mexico, PatientOutcome == 1))
nrow(filter(df.covid_mexico, TestResult == 0 & PatientOutcome == 1))
nrow(filter(df.covid_mexico, IntesiveCareUnit == 0 & PatientOutcome == 1))
nrow(filter(df.covid_mexico, IntesiveCareUnit == 1 & PatientOutcome == 1))
filter(df.covid_mexico, TestResult == 1)
nrow(filter(df.covid_mexico, TestResult == 1))
nrow(filter(df.covid_mexico, TestResult == 0))
df.covid_mexico <- filter(df.covid_mexico, TestResult == 0)
df.covid_mexico <- within(df.covid_mexico, rm(TestResult))
glimpse(df.covid_mexico)
write.csv(df.covid_mexico, "mexico_covid19.csv", row.names = FALSE)
write.csv(df.covid_mexico, "mexico_covid191.csv", row.names = FALSE)
